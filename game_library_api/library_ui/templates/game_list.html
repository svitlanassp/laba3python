{% extends "base.html" %}

{% block title %}–ú–∞–≥–∞–∑–∏–Ω —ñ–≥–æ—Ä{% endblock %}

{% block content %}

    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <div></div> <a href="{% url 'dashboard-menu' %}" class="btn btn-outline-primary btn-lg" style="border-radius: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
            üìä –ú–µ–Ω—é –î–∞—à–±–æ—Ä–¥–∞
        </a>
    </div>
    <h2>–£—Å—ñ —ñ–≥—Ä–∏ –≤ –º–∞–≥–∞–∑–∏–Ω—ñ</h2>

    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; margin-top: 30px;">
        {% for game in games %}
            <div style="border: 1px solid #e0e0e0; padding: 20px; border-radius: 8px; background-color: #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
                <h3 style="margin-top: 0;">
                    <a href="{% url 'game_detail' pk=game.game_id %}" style="text-decoration: none; color: #3498db;">{{ game.title }}</a>
                </h3>

                <p style="color: #7f8c8d; font-size: 0.9em;">
                    –†–æ–∑—Ä–æ–±–Ω–∏–∫: {{ game.developer_name|default:"N/A" }}
                </p>

                <p style="font-size: 0.85em; color: #34495e; min-height: 40px;">
                    {% for genre in game.genre_names %}
                        <span style="display: inline-block; background-color: #ecf0f1; padding: 3px 8px; border-radius: 3px; margin-right: 5px;">#{{ genre }}</span>
                    {% endfor %}
                </p>

                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                    {% if game.is_owned %}
                        <span style="color: #27ae60; font-weight: bold; font-size: 0.9rem;">‚úî –ü—Ä–∏–¥–±–∞–Ω–æ</span>

                    {% else %}
                        <span style="font-size: 1.2rem; font-weight: bold; color: #2ecc71;">{{ game.price }} $</span>

                        <a href="{% url 'game_detail' pk=game.game_id %}" class="btn btn-primary">
                            –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ ‚Üí
                        </a>
                    {% endif %}
                </div>
            </div>
        {% empty %}
            <p style="grid-column: 1/-1; text-align: center; padding: 50px; border: 2px dashed #e0e0e0; border-radius: 8px; color: #7f8c8d;">–ù–∞—Ä–∞–∑—ñ —ñ–≥–æ—Ä —É –º–∞–≥–∞–∑–∏–Ω—ñ –Ω–µ–º–∞—î.</p>
        {% endfor %}
    </div>

    {% if games.has_other_pages %}
    <div class="pagination" style="margin-top: 40px; margin-bottom: 40px; display: flex; justify-content: center; align-items: center; gap: 15px;">

        {% if games.has_previous %}
            <a href="?page=1" class="btn btn-secondary" style="text-decoration: none;">&laquo; –ü–µ—Ä—à–∞</a>
            <a href="?page={{ games.previous_page_number }}" class="btn btn-secondary" style="text-decoration: none;">&lsaquo; –ù–∞–∑–∞–¥</a>
        {% endif %}

        <span class="current" style="font-weight: bold; font-size: 1.1em;">
            –°—Ç–æ—Ä—ñ–Ω–∫–∞ {{ games.number }} –∑ {{ games.paginator.num_pages }}
        </span>

        {% if games.has_next %}
            <a href="?page={{ games.next_page_number }}" class="btn btn-secondary" style="text-decoration: none;">–í–ø–µ—Ä–µ–¥ &rsaquo;</a>
            <a href="?page={{ games.paginator.num_pages }}" class="btn btn-secondary" style="text-decoration: none;">–û—Å—Ç–∞–Ω–Ω—è &raquo;</a>
        {% endif %}

    </div>
    {% endif %}

{% endblock %}